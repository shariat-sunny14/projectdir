{% extends 'base_form/main_base/main_base.html' %}
{% load crispy_forms_tags %}
{% load static %}
{% block extra_link %}
<!--========== CSS ==========-->
<link rel="stylesheet" href="{% static 'statistics_style/css/statistics_style.css' %}">
<link rel="stylesheet" href="{% static 'sales_coll_report_style/css/sales_coll_report_style.css' %}">
{% endblock %}
<!--========== CONTENTS start==========-->
{% block body %}
<!-- loader start -->
<!-- <div class="loader"></div> -->
<!-- loader end -->
<main>
    <section class="container-fluid" style="margin-top: 0.5rem; margin-bottom: 0.5rem; padding-left: 0rem; padding-right: 0rem;">
        <section style="border: 1px solid rgba(0, 0, 0, .125); border-top: none; border-radius: 0.3rem;">
            <div style="border: 1px solid rgba(0, 0, 0, .125);
                margin-bottom: 0.5rem;
                border-left: none;
                border-right: none;
                border-top-left-radius: 0.3rem;
                border-top-right-radius: 0.3rem;
                background: #337e6b;">
                <!-- Main Heading -->
                <div class="row">
                    <div class="col col-md-4 col-md-6 dashboar-head" style="border-bottom: 0px solid transparent;">
                        <div class="d-sm-flex align-items-center" style="margin-left: 1rem;">
                            <i class='bx bx-scatter-chart text-white req-head-icon'></i>
                            <h1 class="h3 text-white req-head">Billing Summary Reports Dashboard</h1>
                            <!--  -->
                            <div style="position: absolute; right: 2rem;">
                                <!--  -->
                                {% if billingBtn_access %}
                                <button type="button" onClick="navigateTo('/item_pos_billing/')"
                                    class="btn col-ms-3 text-white btn-xs item_payment_btn"
                                    style="display: flex; font-size: 0.8rem; font-weight: bolder; box-shadow: 4px 5px 10px 0px #2a6d5c; border-radius: 0.7rem; border: 1.5px solid #fff; height: 1.7rem; padding: 0.5rem 1.3rem; flex-direction: row; flex-wrap: nowrap; align-items: center;">
                                    Billing
                                </button>
                                {% endif %}
                                <!--  -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <!--  -->
            <section style="margin: 0.5rem;">
                <div class="card" style="align-items: start; margin-bottom: 0.5rem; box-shadow: 0px 5px 5px rgba(97, 97, 97, 0.3)">
                    <div class="card-body col-sm-12" style="background: #b9cec9;">
                        <div class="report-filter">
                            <!-- Date Range Filter -->
                            <div class="date-range">
                                <div class="row" style="display:flex; font-size: 0.8rem;">
                                    <div class="date_range-element col-sm-12" style="display:flex">
                                        <!--  -->
                                        <div class="row g-3 col-sm-5 align-items-center">
                                            <div class="col-auto">
                                                <label for="id_filter_org" class="col-form-label">Org :</label>
                                            </div>
                                            <div class="col-sm-9">
                                                <select id="id_filter_org" name="filter_org"
                                                    class="form-select item_inputbox store_Selectbox"
                                                    aria-label="Default select example">
                                                    {% for org in org_list %}
                                                    <option id="{{org.org_id}}" value="{{org.org_id}}">
                                                        {{org.org_name}}
                                                    </option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                        </div>
                                        <!--  -->
                                        <div class="row g-3 col-sm-5 align-items-center">
                                            <div class="col-auto">
                                                <label for="id_filter_branch" class="col-form-label">Branch :</label>
                                            </div>
                                            <div class="col-sm-8">
                                                <select id="id_filter_branch" name="filter_branch"
                                                    class="form-select item_inputbox store_Selectbox"
                                                    aria-label="Default select example">
                                                    <!--  -->
                                                </select>
                                            </div>
                                        </div>
                                        <!--  -->
                                        <!-- from to date -->
                                        <div class="row g-3 col-sm-4 align-items-center">
                                            <div class="col-auto">
                                                <label for="start_from" class="col-form-label">From :</label>
                                            </div>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control item_inputbox datepicker" id="start_from"
                                                    name="start_from" autocomplete="off" required>
                                            </div>
                                        </div>
                                        <!--  -->
                                        <div class="row g-3 col-sm-4 align-items-center">
                                            <div class="col-auto">
                                                <label for="end_from" class="col-form-label">To :</label>
                                            </div>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control item_inputbox datepicker" id="end_from"
                                                    name="end_from" autocomplete="off" required>
                                            </div>
                                        </div>
                                        <!-- from to date -->
                                        <!--  -->
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            <!--  -->
            <section style="margin-top: 1rem; border-top: 2px solid rgba(0, 0, 0, .125);"></section>
            <span style="padding: 0.5rem;
                position: relative;
                display: flex;
                flex-direction: row;
                flex-wrap: nowrap;
                justify-content: center;
                align-items: center;
                font-size: 2rem;
                font-weight: bold;
                font-family: serif;
                background: linear-gradient(to right, #005f24, #00a03d);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                color: transparent;">
                Sales, Collection & Due Summary Report Status
            </span>
            <section style="border-top: 2px solid rgba(0, 0, 0, .125);"></section>
            <!--  -->
            <section style="width: 97.5%; margin-top: 2rem; margin-left: 0.5rem;">
                <div class="display-flex col-sm-12">
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Total Sales</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-info" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalSalesAmt">Loading...</h5>
                                <div class="card-icon-wrapper bg-success salesDtlsReport">
                                    <span style="font-size: 0.95rem; font-weight: bolder; color: #fff;">Views</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Total Collections (CASH)</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-success" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalCashCollAmt">Loading...</h5>
                                <div class="card-icon-wrapper bg-success collDtlsReport">
                                    <span style="font-size: 0.95rem; font-weight: bolder; color: #fff;">Views</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Total Dues</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-danger" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalDuesAmt">Loading...</h5>
                                <div class="card-icon-wrapper bg-success duesDtlsReport">
                                    <span style="font-size: 0.95rem; font-weight: bolder; color: #fff;">Views</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                </div>
            </section>
            <!--  -->
            <section style="margin-top: 2rem; border-top: 2px solid rgba(0, 0, 0, .125);"></section>
            <span style="padding: 0.5rem;
                position: relative;
                display: flex;
                flex-direction: row;
                flex-wrap: nowrap;
                justify-content: center;
                align-items: center;
                font-size: 2rem;
                font-weight: bold;
                font-family: serif;
                background: linear-gradient(to right, #119ff1, #11e2f1);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                background-clip: text;
                color: transparent;">
                Others Collection Summary Report Status
            </span>
            <section style="border-top: 2px solid rgba(0, 0, 0, .125);"></section>
            <!--  -->
            <!-- others bank, bkash etc collection -->
             <!--  -->
            <span style="margin-top: 1rem; margin-left: 1rem; padding: 0.2rem; position: relative; display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: flex-start; align-items: center; font-size: 1.2rem; font-weight: 600; font-family: serif; color: rgb(139, 44, 0);">
                Previous Remaining & Todays Remaining Collection from Total Net Collection Status & Total Cash on Hands
            </span>
            <!--  -->
            <section style="width: 97.5%; margin-top: 1rem; margin-left: 0.5rem;">
                <div class="display-flex col-sm-12" style="margin-bottom: 2rem;">
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Previous Remaining from Total Net Coll.</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-warning" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalPreviousRemainingFromTotalNetColl">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Remaining from Total Net Collection</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-success" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalRemainingFromTotalNetColl">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Total Cash on Hands</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-danger" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="TotalCashonHands">Loading...</h5>
                            </div>
                        </div>
                    </div>
                </div>
                <!--  -->
            </section>
            <!--  -->
            <!-- Supplier/Party Payment Amount -->
             <!--  -->
            <span style="margin-top: 1rem; margin-left: 1rem; padding: 0.2rem; position: relative; display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: flex-start; align-items: center; font-size: 1.2rem; font-weight: 600; font-family: serif; color: rgb(139, 44, 0);">
                Supplier/Party Payment Amount (Cash), (Mobile Bank) & (Bank)
            </span>
            <!--  -->
            <section style="width: 97.5%; margin-top: 1rem; margin-left: 0.5rem;">
                <div class="display-flex col-sm-12" style="margin-bottom: 2rem;">
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Supplier/Party Payment Amt (Mobile Bank) (-)</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-warning" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalSupplierPartyPayAmtMobileBank">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Supplier/Party Payment Amt (Bank) (-)</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-success" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalSupplierPartyPayAmtBank">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Supplier/Party Payment Amt (Cash) (-)</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-danger" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalSupplierPartyPayAmtCash">Loading...</h5>
                            </div>
                        </div>
                    </div>
                </div>
                <!--  -->
            </section>
            <!--  -->
            <!--  -->
            <span style="margin-top: 1rem; margin-left: 1rem; padding: 0.2rem; position: relative; display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: flex-start; align-items: center; font-size: 1.2rem; font-weight: 600; font-family: serif; color: rgb(139, 44, 0);">
                Cash Collection Descriptions Summary Status
            </span>
            <!--  -->
            <section style="width: 97.5%; margin-top: 1rem; margin-left: 0.5rem;">
                <div class="display-flex col-sm-12" style="margin-bottom: 2rem;">
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Net Sub Total Collections (Cash)</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-info" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalNetCollCash">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Other Expense (-)</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-success" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalOtherExpense">Loading...</h5>
                                <div class="card-icon-wrapper bg-success OtherExpenseReport">
                                    <span style="font-size: 0.95rem; font-weight: bolder; color: #fff;">Views</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Carrying / Lifting Cost (-)</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-danger" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalCarryingLiftingCost">Loading...</h5>
                                <div class="card-icon-wrapper bg-success CarryingLiftingCostReport">
                                    <span style="font-size: 0.95rem; font-weight: bolder; color: #fff;">Views</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--  -->
                <!--  -->
                <div class="display-flex col-sm-12" style="margin-bottom: 2rem;">
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Total Local Purchase On Cash (-)</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-warning" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalLPOnCash">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Total Local Purchase Return On Cash (+)</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-primary" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalLPRetOnCash">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Total Manual Return Recieved (-)</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-secondary" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalManualRetRec">Loading...</h5>
                            </div>
                        </div>
                    </div>
                </div>
                <!--  -->
                <!--  -->
                <div class="display-flex col-sm-12" style="margin-bottom: 2rem;">
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Without Invoice Collection (Cash) (+)</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-info" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalWithoutInvCollCash">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Reg. Local Client Payment Amt (Cash) (-)</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-success" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalLClientPayAmtCash">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Daily Coll Rec From Sub Branch: (+)</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-warning" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalDailyCollRecFromSubB">Loading...</h5>
                            </div>
                        </div>
                    </div>
                </div>
                <!--  -->
                <!--  -->
                <div class="display-flex col-sm-12" style="margin-bottom: 2rem;">
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Total Net Collection</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-primary" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalNetCollection">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Daily collection Deposit from Main Branch (-)</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-secondary" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalDailyCollDepFromMainB">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Daily Collection Bank Deposit (-)</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-info" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalDailyCollBankDeposit">Loading...</h5>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                </div>
                <!--  -->
                <!--  -->
            </section>
            <!--  -->
            <!--  -->
            <span style="margin-top: 1rem; margin-left: 1rem; padding: 0.2rem; position: relative; display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: flex-start; align-items: center; font-size: 1.2rem; font-weight: 600; font-family: serif; color: rgb(139, 44, 0);">
                Banking Collection Summary Report Status
            </span>
            <!--  -->
            <section style="width: 97.5%; margin-top: 1rem; margin-left: 0.5rem;">
                <div class="display-flex col-sm-12" style="margin-bottom: 2rem;">
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Cheque Collection</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-info" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalChequeColl">Loading...</h5>
                                <div class="card-icon-wrapper bg-success ChequeCollReport">
                                    <span style="font-size: 0.95rem; font-weight: bolder; color: #fff;">Views</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Debit Card Collection</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-success" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalDebitCardColl">Loading...</h5>
                                <div class="card-icon-wrapper bg-success DebitCardCollReport">
                                    <span style="font-size: 0.95rem; font-weight: bolder; color: #fff;">Views</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Credit Card Collection</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-danger" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalCreditCardColl">Loading...</h5>
                                <div class="card-icon-wrapper bg-success CreditCardCollReport">
                                    <span style="font-size: 0.95rem; font-weight: bolder; color: #fff;">Views</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--  -->
                <!--  -->
                <div class="display-flex col-sm-12" style="margin-bottom: 2rem;">
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Bank Deposit Collection</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-warning" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalBankDepositColl">Loading...</h5>
                                <div class="card-icon-wrapper bg-success BankDepositCollReport">
                                    <span style="font-size: 0.95rem; font-weight: bolder; color: #fff;">Views</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Without Invoice Collection (Bank)</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-primary" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalWithoutInvCollBank">Loading...</h5>
                                <div class="card-icon-wrapper bg-success WithoutInvCollBankReport">
                                    <span style="font-size: 0.95rem; font-weight: bolder; color: #fff;">Views</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    
                </div>
            </section>
            <!--  -->
            <!--  -->
            <span style="margin-top: 1rem; margin-left: 1rem; padding: 0.2rem; position: relative; display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: flex-start; align-items: center; font-size: 1.2rem; font-weight: 600; font-family: serif; color: rgb(139, 44, 0);">
                Mobile Banking Collection Summary Report Status
            </span>
            <!--  -->
            <section style="width: 97.5%; margin-top: 1rem; margin-left: 0.5rem;">
                <div class="display-flex col-sm-12" style="margin-bottom: 2rem;">
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Bkash Collection</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-info" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalBkashColl">Loading...</h5>
                                <div class="card-icon-wrapper bg-success BkashCollReport">
                                    <span style="font-size: 0.95rem; font-weight: bolder; color: #fff;">Views</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Nagad Collection</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-success" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalNagadColl">Loading...</h5>
                                <div class="card-icon-wrapper bg-success NagadCollReport">
                                    <span style="font-size: 0.95rem; font-weight: bolder; color: #fff;">Views</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Upay Collection</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-danger" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalUpayColl">Loading...</h5>
                                <div class="card-icon-wrapper bg-success UpayCollReport">
                                    <span style="font-size: 0.95rem; font-weight: bolder; color: #fff;">Views</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--  -->
                <!--  -->
                <div class="display-flex col-sm-12" style="margin-bottom: 2rem;">
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">UCash Collection</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-warning" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalUCashColl">Loading...</h5>
                                <div class="card-icon-wrapper bg-success UCashCollReport">
                                    <span style="font-size: 0.95rem; font-weight: bolder; color: #fff;">Views</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <div class="col-sm-4">
                        <div class="card" style="margin-right: 2.2rem;">
                            <div class="card-body card-body-mody" style="margin-bottom: 1rem;">
                                <h5 class="card-title title-font text-success">Without Invoice Collection (Mobile Bank)</h5>
                                <h5 class="font-weight-light pb-2 mb-1 card-body-size text-primary" style="font-size: 1.8rem; font-weight: bolder;"
                                    id="totalWithoutInvCollMobileB">Loading...</h5>
                                <div class="card-icon-wrapper bg-success WithoutInvCollMobileBReport">
                                    <span style="font-size: 0.95rem; font-weight: bolder; color: #fff;">Views</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    <!--  -->
                    <!--  -->
                </div>
            </section>
            <!--  -->
            <!--  -->
        </section>
    </section>
    <!--  -->
    <script>
        $(function () {
            $(document).on('click', '.salesDtlsReport', function (e) {
                e.preventDefault();
                
                var OrgId = $('#id_filter_org').val();
                var branchId = $('#id_filter_branch').val();
                var startFrom = $('#start_from').val();
                var endFrom = $('#end_from').val();
                
                // Correct the query string construction
                var colldtlsReportUrl = "{% url 'sales_details_reports' %}" + 
                    "?org_id=" + encodeURIComponent(OrgId) +
                    "&branch_id=" + encodeURIComponent(branchId) +
                    "&start_from=" + encodeURIComponent(startFrom) +
                    "&end_from=" + encodeURIComponent(endFrom);
                
                window.open(colldtlsReportUrl, '_blank');
            });
        });
        //
        $(function () {
            $(document).on('click', '.collDtlsReport', function (e) {
                e.preventDefault();
                
                var OrgId = $('#id_filter_org').val();
                var branchId = $('#id_filter_branch').val();
                var startData = $('#start_from').val();
                var endData = $('#end_from').val();
                
                // Correct the query string construction
                var colldtlsReportUrl = "{% url 'collections_details_reports' %}" + 
                    "?org_id=" + encodeURIComponent(OrgId) +
                    "&branch_id=" + encodeURIComponent(branchId) +
                    "&start_from=" + encodeURIComponent(startData) +
                    "&end_from=" + encodeURIComponent(endData);
                
                window.open(colldtlsReportUrl, '_blank');
            });
        });
        //
        $(function () {
            $(document).on('click', '.duesDtlsReport', function (e) {
                e.preventDefault();
                
                var OrgId = $('#id_filter_org').val();
                var branchId = $('#id_filter_branch').val();
                var startFrom = $('#start_from').val();
                var endFrom = $('#end_from').val();
                
                // Correct the query string construction
                var colldtlsReportUrl = "{% url 'dues_details_reports' %}" + 
                    "?org_id=" + encodeURIComponent(OrgId) +
                    "&branch_id=" + encodeURIComponent(branchId) +
                    "&start_from=" + encodeURIComponent(startFrom) +
                    "&end_from=" + encodeURIComponent(endFrom);
                
                window.open(colldtlsReportUrl, '_blank');
            });
        });

        // Set today's date as the default value for start_from and end_from inputs
        var today = new Date();
        var formattedDate = today.getFullYear() + '-' + ('0' + (today.getMonth() + 1)).slice(-2) + '-' + ('0' + today.getDate()).slice(-2);
        $('#start_from').val(formattedDate);
        $('#end_from').val(formattedDate);
        // Set today's date as the default value for start_from and end_from inputs end

        // get branch option org wise
        $(document).ready(function () {
            // Initial population of branch options based on the selected organization
            updateBranchOptionsfilter();

            // Event listener for the change event on #id_filter_org
            $('#id_filter_org').change(function () {
                updateBranchOptionsfilter();
            });

            function updateBranchOptionsfilter() {
                // Get the selected organization ID
                var selectedFilterOrgId = $('#id_filter_org').val();

                // Make an AJAX request to get branch options based on the selected organization
                $.ajax({
                    url: '/get_branch_options/',
                    method: 'GET',
                    data: { org_id: selectedFilterOrgId },
                    success: function (data) {
                        // Clear existing options
                        $('#id_filter_branch').empty();

                        // Add fetched branch options
                        $.each(data.branch_list, function (index, branch) {
                            $('#id_filter_branch').append('<option value="' + branch.branch_id + '">' + branch.branch_name + '</option>');
                        });

                        // Trigger change event for #id_filter_branch to automatically update its value
                        $('#id_filter_branch').trigger('change');
                    },
                    error: function (error) {
                        console.error('Error fetching branch options:', error);
                    }
                });
            }
        });

        $(document).ready(function () {
            // Function to update sales_total_amt based on the date range
            function updateSalesTotalAmt() {
                var filterOrg = $('#id_filter_org').val();
                var filterBranch = $('#id_filter_branch').val();
                var startDate = $('#start_from').val();
                var endDate = $('#end_from').val();
        
                // Ensure filterBranch is not empty before making the AJAX request
                if (!filterBranch) {
                    console.log("Waiting for filterBranch value...");
                    return; // Stop execution if filterBranch is empty
                }

                // total sales
                $.ajax({
                    headers: {
                        "X-CSRFToken": '{{csrf_token}}'
                    },
                    url: '{% url "statistics_dashboard:get_statistics_total_sales_report" %}',
                    method: 'POST',
                    data: {
                        'org_id': filterOrg,
                        'branch_id': filterBranch,
                        'start_from': startDate,
                        'end_from': endDate,
                    },
                    dataType: 'json',
                    success: function (response) {
                        var totalSalesAmts = response.all_total_net_bill;
                        setTimeout(function () {
                            $('#totalSalesAmt').text(totalSalesAmts + ' Tk.');
                        }, 500);
                    }
                });
        
                // total collection cash
                $.ajax({
                    headers: {
                        "X-CSRFToken": '{{csrf_token}}'
                    },
                    url: '{% url "statistics_dashboard:get_statistics_total_cash_coll_report" %}',
                    method: 'POST',
                    data: {
                        'org_id': filterOrg,
                        'branch_id': filterBranch,
                        'start_from': startDate,
                        'end_from': endDate,
                    },
                    dataType: 'json',
                    success: function (response) {
                        var cashCollectionAmt = response.grand_total_collection;
                        setTimeout(function () {
                            $('#totalCashCollAmt').text(cashCollectionAmt + ' Tk.');
                        }, 500);
                    }
                });

                // total Dues
                $.ajax({
                    headers: {
                        "X-CSRFToken": '{{csrf_token}}'
                    },
                    url: '{% url "statistics_dashboard:get_statistics_total_dues_report" %}',
                    method: 'POST',
                    data: {
                        'org_id': filterOrg,
                        'branch_id': filterBranch,
                        'start_from': startDate,
                        'end_from': endDate,
                    },
                    dataType: 'json',
                    success: function (response) {
                        var totalDuesAmts = response.grand_total_dues;
                        setTimeout(function () {
                            $('#totalDuesAmt').text(totalDuesAmts + ' Tk.');
                        }, 500);
                    }
                });

                //Previous Remaining from Total Net Collection
                $.ajax({
                    headers: {
                        "X-CSRFToken": '{{csrf_token}}'
                    },
                    url: '{% url "previous_remaining_from_total_net_collection" %}',
                    method: 'POST',
                    data: {
                        'org_id': filterOrg,
                        'branch_id': filterBranch,
                    },
                    dataType: 'json',
                    success: function (response) {
                        var totalprevious_total_remaining_collection = response.previous_total_remaining_collection;
                        setTimeout(function () {
                            $('#totalPreviousRemainingFromTotalNetColl').text(totalprevious_total_remaining_collection + ' Tk.');
                        }, 500);
                    }
                });

                // Others Collection Summary Report Status
                $.ajax({
                    headers: {
                        "X-CSRFToken": '{{csrf_token}}'
                    },
                    url: '{% url "others_bank_bkash_etc_collection_summary_report" %}',
                    method: 'POST',
                    data: {
                        'org_id': filterOrg,
                        'branch_id': filterBranch,
                        'start_from': startDate,
                        'end_from': endDate,
                    },
                    dataType: 'json',
                    success: function (response) {
                        var totalRemainingCollection = response.total_remaining_collection;
                        var TotalCashonHandsAmt = response.total_cash_on_hand;

                        var grand_suppclipay_mb_amt = response.grand_suppclipay_mb_amt;
                        var grand_suppclipay_b_amt = response.grand_suppclipay_b_amt;
                        var grand_suppclipay_amt = response.grand_suppclipay_amt;

                        var totalNetCollCash = response.net_sub_total_coll_cash;
                        var totalOtherExpAmt = response.total_other_exp_amt;
                        var totalGrandCarryingPayAmt = response.grand_carrying_pay_amt;
                        var totalGrandTotalAmt = response.grand_total_amt;
                        var totalGrandRetTotalAmt = response.grand_ret_total_amt;
                        var totalGrandMrrTotalAmt = response.grand_mrr_total_amt;
                        var totalGrandWoinvCollAmt = response.grand_woinvcoll_amt;
                        var totalGrandRegCliPayAmt = response.grand_regclipay_amt;
                        var totalDepRecSubBranch = response.dep_rec_sub_branch;
                        var totalGrandTotalCollection = response.grand_total_collection;
                        var totalDepositMainBranch = response.deposit_main_branch;
                        var totalDailyDeposit = response.total_daily_deposit;
                        // mobile banking collection
                        var totalgrand_bkash_coll_amt = response.grand_bkash_coll_amt;
                        var totalgrand_nagad_coll_amt = response.grand_nagad_coll_amt;
                        var totalgrand_upay_coll_amt = response.grand_upay_coll_amt;
                        var totalgrand_ucash_coll_amt = response.grand_ucash_coll_amt;
                        var totalgrand_woinvcoll_mb_amt = response.grand_woinvcoll_mb_amt;
                        // banking collection
                        var totalgrand_cheque_coll_amt = response.grand_cheque_coll_amt;
                        var totalgrand_debit_card_coll_amt = response.grand_debit_card_coll_amt;
                        var totalgrand_credit_card_coll_amt = response.grand_credit_card_coll_amt;
                        var totalgrand_bank_deposit_coll_amt = response.grand_bank_deposit_coll_amt;
                        var totalgrand_woinvcoll_b_amt = response.grand_woinvcoll_b_amt;

                        setTimeout(function () {
                            $('#totalRemainingFromTotalNetColl').text(totalRemainingCollection + ' Tk.');
                            $('#TotalCashonHands').text(TotalCashonHandsAmt + ' Tk.');
                            $('#totalSupplierPartyPayAmtMobileBank').text(grand_suppclipay_mb_amt + ' Tk.');
                            $('#totalSupplierPartyPayAmtBank').text(grand_suppclipay_b_amt + ' Tk.');
                            $('#totalSupplierPartyPayAmtCash').text(grand_suppclipay_amt + ' Tk.');
                            $('#totalNetCollCash').text(totalNetCollCash + ' Tk.');
                            $('#totalOtherExpense').text(totalOtherExpAmt + ' Tk.');
                            $('#totalCarryingLiftingCost').text(totalGrandCarryingPayAmt + ' Tk.');
                            $('#totalLPOnCash').text(totalGrandTotalAmt + ' Tk.');
                            $('#totalLPRetOnCash').text(totalGrandRetTotalAmt + ' Tk.');
                            $('#totalManualRetRec').text(totalGrandMrrTotalAmt + ' Tk.');
                            $('#totalWithoutInvCollCash').text(totalGrandWoinvCollAmt + ' Tk.');
                            $('#totalLClientPayAmtCash').text(totalGrandRegCliPayAmt + ' Tk.');
                            $('#totalDailyCollRecFromSubB').text(totalDepRecSubBranch + ' Tk.');
                            $('#totalNetCollection').text(totalGrandTotalCollection + ' Tk.');
                            $('#totalDailyCollDepFromMainB').text(totalDepositMainBranch + ' Tk.');
                            $('#totalDailyCollBankDeposit').text(totalDailyDeposit + ' Tk.');
                            // mobile banking collection
                            $('#totalBkashColl').text(totalgrand_bkash_coll_amt + ' Tk.');
                            $('#totalNagadColl').text(totalgrand_nagad_coll_amt + ' Tk.');
                            $('#totalUpayColl').text(totalgrand_upay_coll_amt + ' Tk.');
                            $('#totalUCashColl').text(totalgrand_ucash_coll_amt + ' Tk.');
                            $('#totalWithoutInvCollMobileB').text(totalgrand_woinvcoll_mb_amt + ' Tk.');
                            // banking collection
                            $('#totalChequeColl').text(totalgrand_cheque_coll_amt + ' Tk.');
                            $('#totalDebitCardColl').text(totalgrand_debit_card_coll_amt + ' Tk.');
                            $('#totalCreditCardColl').text(totalgrand_credit_card_coll_amt + ' Tk.');
                            $('#totalBankDepositColl').text(totalgrand_bank_deposit_coll_amt + ' Tk.');
                            $('#totalWithoutInvCollBank').text(totalgrand_woinvcoll_b_amt + ' Tk.');
                        }, 500);
                    }
                });
            }
        
            // Trigger updateSalesTotalAmt function when date inputs change
            $('#id_filter_org, #id_filter_branch, #start_from, #end_from').change(function () {
                updateSalesTotalAmt();
                $('#totalCashCollAmt').text('Loading...');
                $('#totalSalesAmt').text('Loading...');
                $('#totalDuesAmt').text('Loading...');
                
            });
        
            // Initial call to fetch and display sales_total_amt (only if filterBranch has a value)
            if ($('#id_filter_branch').val()) {
                updateSalesTotalAmt();
            }
        });
    </script>
</main>
{% endblock %}